(function(h){h.fn.umgclassic=function(d){d=h.extend({backgroundColor:"",slideshowBackground:"",titleColor:"0259C4",newPeriod:7,autoPlay:!1,pauseTime:5,thumbWidth:40,thumbHeight:40,videoWidth:550,videoHeight:400,audioWidth:400,audioHeight:150,scaleMode:"fit",animationSpeed:"slow",showDesc:"topright",quickNav:!0,allowRating:!0,showSocial:!0,hideOverlays:!0,autoPlayVideo:!0,showVideoControls:!0,linkInNewWindow:!1,facebook:!0,twitter:!0,linkedIn:!0,email:!0,pinterest:!0,galleryroot:"Gallery Root",xofy:"[x] of [y]",
medias:" media",childalbums:" child albums",yourrate:"Rate it:",tagphoto:"Add / Delete",tagging:"Done",tagsassigned:"[x] tags assigned",sharethis:"Share this item by",currentalbum:"You are watching:",closealbum:"See all albums",readmore:"more",download:"Download",purchase:"Purchase",pinterest_style:"addthis_button_pinterest",tagdefault:"",logoWidth:120,logoHeight:120,price:0,editable:!0,albumoffset:20,modulePath:"http://localhost/dnn450/desktopmodules/ultramediagallery/"},d);if(window.location.hash){var B,
C,D=window.location.hash.substring(1);0<D.indexOf("/")?(B=parseInt(D.split("/")[0]),C=parseInt(D.split("/")[1])):B=parseInt(D);if(B&&(d.defaultAlbum=B,C))d.defaultPhoto=C,d.autoPlay=!1}return this.each(function(){function B(){for(var a=c.find(".social .rate"),b=0;5>b;b++)a.append("<span class='star' data-score='"+b+"'></span>");a.children().hover(function(){a.children(":lt("+(1*h(this).attr("data-score")+1)+")").addClass("hover")},function(){a.children().removeClass("hover")});a.children().click(function(){var a=
1*h(this).attr("data-score")+1,b=h(".mediathumb:eq("+o+")").attr("data-umgid");dnn.xmlhttp.doCallBack(d.clientapi,"rate"+b+"@"+a,D,this,null,null,null,null,0)})}function D(a){if(0<a.indexOf("|")){var a=a.split("|"),b=1*a[1],d=1*a[2],a=q.find(".photo[data-umgid="+1*a[0]+"]");a.attr("data-score",b);a.attr("data-ratings",d);ea(a)}else a&&alert(a)}function C(a){var b=parseInt(a[0].style.left)+"",d=parseInt(a[0].style.top)+"";if(a.hasClass("newtag")){var e=a.children(".text").position().top+parseInt(a.css("margin-top")),
e=e/a.parent().height(),d=1*d+Math.round(100*e);100<d&&(d=100);d+=""}4>b.length&&(b="0000".substring(0,4-b.length)+b);4>d.length&&(d="0000".substring(0,4-d.length)+d);return b+"|"+d}function x(a){E.children(".album").remove();for(var b=a.children(".album"),n=0;n<b.length;n++){var e=h(b[n]),f="";if(0<e.children(".album").length){var f=e.children(".album").length+d.childalbums,g="",u;u=9>e.children(".album").length?2:3;for(var F=0;F<e.children(".album").length&&!(F>u*u);F++)var j=(d.logoWidth-2)/u,
g=g+("<div class='subalbumlogo' style='width:"+j+"px;height:"+(d.logoHeight-2)/u+"px;'><img src='"+h(e.children(".album")[F]).attr("data-logo")+"' style='width:"+(j-8)+"px;' /></div>")}else f=e.children().length,0>=f&&(f=1*e.attr("data-medias")),f+=d.medias,g="<img alt='Open this album' src='"+e.attr("data-logo")+"' />";u=!1;(F=e.attr("data-daysago"))&&F<d.newPeriod&&(u=!0);e=h("<table class='album' data-path='"+n+"' data-umgid='"+e.attr("data-umgid")+"'><tr><td class='tl'></td><td class='t'></td><td class='tr'></td></tr><tr><td class='l'></td><td><div class='main' style='width:"+
d.logoWidth+"px;height:"+d.logoHeight+"px;'>"+(u?"<div class='new'></div>":"")+g+"<div class='float'>"+f+"</div></div></td><td class='r'></td></tr><tr><td class='bl'></td><td class='b'></td><td class='br'></td></tr><tr><td colspan='3' class='title' style='width:"+d.logoWidth+"px;color:#"+d.titleColor+";'>"+e.attr("data-title")+"</td></tr><tr><td colspan='3' class='contents'>"+f+"</td></tr></table>");E.append(e);0>v&&(U=e.width(),V=e.height());0==n&&(v=Math.floor((c.height()-2*d.albumoffset)/(V+20)),
0>=v&&(v=1),O=Math.floor(c.width()/(U+40)),W=c.width()/O,P=(c.height()-2*d.albumoffset)/v);f=Math.floor(n/O);g=2*d.albumoffset*Math.floor(f/v)+d.albumoffset+f*P+(P-V)/2;e.css("left",n%O*W+(W-U)/2);e.css("top",g);Q=f+1}E.css("top",0);E.children(".album").click(function(){R(this)});Q>v?(fa.show(),ga(1)):fa.hide();if(a.hasClass("datahtml"))L.hide();else{L.show();L.children().remove();b="<span class='separator'></span><div class='a'><span class='left'></span><span class='center'>"+a.attr("data-title")+
"</span><span class='right'></span></div>";for(a=a.parent();!a.hasClass("datahtml");)b="<span class='separator'></span><a href='javascript:void(0);' data-umgid='"+a.attr("data-umgid")+"' ><span class='left'></span><span class='center'>"+a.attr("data-title")+"</span><span class='right'></span></a>"+b,a=a.parent();b="<a href='javascript:void(0);' data-umgid='0' ><span class='left'></span><span class='center'>"+d.galleryroot+"</span><span class='right'></span></a>"+b;L.html(b);L.children("a").click(function(){R(this)})}}
function ha(a){a=Math.floor(-1*E.position().top/c.height())+a;if(!(0>a)&&!(a*v>=Q)){var d=-1*a*c.height();E.css("top",d);ga(a+1)}}function ga(a){var b=Math.ceil(Q*P/c.height()),n=d.xofy,n=n.replace("[x]",a),n=n.replace("[y]",b);ua.html(n);1<a?X.removeClass("disabled"):X.addClass("disabled");a<b?Y.removeClass("disabled"):Y.addClass("disabled")}function R(a){a=1*h(a).attr("data-umgid");"0"==a?x(q):(a=q.find(".album[data-umgid='"+a+"']"),0<a.children(".album").length?x(a):l?l&&l[0]==a[0]?t.animate({top:c.height()},
"fast","linear",function(){g.show()}):(m.children(".medialarge").remove(),l=a,t.animate({top:c.height()},"fast","linear",ia)):(l=a,t.animate({top:c.height()},"fast","linear",ia)))}function ia(){g.show();j.children().remove();0<l.children(".photo").length?ja():(r.show(),dnn.xmlhttp.doCallBack(d.clientapi,"open"+l.attr("data-umgid")+"@",va,this,null,null,null,null,0))}function va(a){r.hide();l.html(a);ja()}function ja(){for(var a=l.children(".photo"),b=-1,c=0;c<a.length;c++){var e=h(a[c]),e="<div class='mediathumb' data-index='"+
c+"' data-umgid='"+e.attr("data-umgid")+"'><img alt='logo' title='"+e.attr("data-title")+"' src='"+e.attr("data-thumb")+"' style='width:"+d.thumbWidth+"px;height:"+d.thumbHeight+"px;' /></div>",e=h(e);j.append(e);0==c&&(b=e.outerWidth(),parseInt(e.css("margin-left"))&&(b+=parseInt(e.css("margin-left"))),parseInt(e.css("margin-right"))&&(b+=parseInt(e.css("margin-right"))))}c=Math.floor((h(window).width()-parseInt(G.css("margin-left"))-parseInt(G.css("margin-right")))/b);if(a.length<c){a=c-a.length;
for(c=0;c<a;c++)j.append("<div class='placeholder'><div style='width:"+d.thumbWidth+"px;height:"+d.thumbHeight+"px;'></div></div>")}a=0;j.css("padding-left")&&(a+=parseInt(j.css("padding-left")));j.css("padding-right")&&(a+=parseInt(j.css("padding-right")));b=b*j.children().length+a;j.css("width",b);y.attr("data-inited")||(b=j.outerHeight(),50>b&&(b=50),y.css("height",b),y.attr("data-inited",1));h(".mediathumb").hover(function(){var a=h(this);a.addClass("current");s?s.show():(s=h("<div class='bigthumb' ><div class='bigthumbinner' ><img alt='thumbnail' src='' /></div></div>"),
g.append(s));s.find("img").attr("src",a.children("img").attr("src"));var d=a.position().top+a.parent().position().top+a.parent().parent().position().top+a.parent().parent().parent().position().top,b=a.position().left+a.parent().position().left+parseInt(a.parent().parent().css("margin-left"))+a.parent().parent().parent().position().left;s.css("top",d-s.height()-5);s.css("left",b+a.outerWidth()/2-s.width()/2)},function(){h(this).removeClass("current");s.hide()});h(".mediathumb").click(function(){g.children(".newtag").remove();
g.children(".atag").remove();m.children(".multimedia").remove();var a=void 0;if(0<=o){var b=h(".mediathumb:eq("+o+")").attr("data-umgid"),a=m.children(".medialarge[data-umgid='"+b+"']");if(0<a.children(".newtag").length||a.children(".deleted").length){if(!window.confirm("Some tags have not been saved, are you sure you wish to abandon them?"))return;a.children(".deleted").removeClass("deleted")}}z=0;M=!1;h(".mediathumb").removeClass("beingplayed");var e=h(this);e.addClass("beingplayed");o=1*e.attr("data-index");
var c=e.attr("data-umgid"),b=q.find(".photo[data-umgid='"+c+"']");wa();var f=m.children("[data-umgid='"+c+"']");if(0<f.length)r.hide(),w(f),Z(a,f);else{r.show();A=!0;var i=$(b.attr("data-url"));if("i"==i){var n=new Image;n.onload=function(){r.hide();A=!1;f=h("<div data-umgid='"+c+"' class='medialarge' data-width='"+n.width+"' data-height='"+n.height+"'><img src='"+n.src+"' alt='' width='100%' height='100%' /></div>");w(f);m.append(f);Z(a,f);ka(f);la(f)};n.src=b.attr("data-url")}else{if("v"==i)i="",
aa?(i="true",d.autoPlayVideo||(i+="false"),i="<video src='"+b.attr("data-url")+"' type='video/mp4' width='100%' height='100%' autoplay='"+i+"' controls='controls' />"):(i="",ma||(ma=!0,i+="&notification=Double click to watch in full screen."),d.autoPlayVideo||(i+="&autoStart=False"),d.showVideoControls&&(i+="&showControlBar=True"),i="<object allowFullScreen='True' allowScriptAccess='always' allowNetworking='all' width='100%' height='100%'><param name='movie' value='"+d.modulePath+"SimpleVideo.swf' /><param name='allowFullScreen' value='true' /><param name='wmode' value='transparent' /><param name='flashvars' value='video="+
b.attr("data-url")+"&sender="+N+i+"' /><embed src='"+d.modulePath+"SimpleVideo.swf' type='application/x-shockwave-flash' allowFullScreen='True' allowScriptAccess='always' allowNetworking='all' width='100%' height='100%' wmode='transparent' flashvars='video="+b.attr("data-url")+"&sender="+N+i+"'></embed></object>"),i="<div data-umgid='"+c+"' class='medialarge multimedia' style='width:"+d.videoWidth+"px;height:"+d.videoHeight+"px;'>"+i+"</div>",f=h(i),m.append(f),w(m.children(".multimedia[data-umgid="+
c+"]")),r.hide(),A=!1,M=!0;else if("a"==i)i="",aa?i="<audio src='"+b.attr("data-url")+"' type='audio/mp3' width='100%' height='100%' autoplay='true' controls='controls' />":(i="",d.showVideoControls&&(i+="&showControlBar=True"),i="<object allowFullScreen='True' allowScriptAccess='always' wmode='transparent' width='100%' height='100%'><param name='movie' value='"+d.modulePath+"SimpleAudio.swf' /><param name='allowFullScreen' value='true' /><param name='wmode' value='transparent' /><param name='flashvars' value='sender="+
N+"&audio="+b.attr("data-url")+i+"' /><embed src='"+d.modulePath+"SimpleAudio.swf' type='application/x-shockwave-flash' allowFullScreen='True' allowScriptAccess='always' wmode='transparent' width='100%' height='100%' flashvars='sender="+N+"&audio="+b.attr("data-url")+i+"'></embed></object>"),i="<div data-umgid='"+c+"' class='medialarge multimedia' style='width:"+d.audioWidth+"px;height:"+d.audioHeight+"px;'>"+i+"</div>",f=h(i),m.append(f),w(m.children(".multimedia[data-umgid="+c+"]")),r.hide(),A=
!1,M=!0;else if("f"==i){i="";if(aa){alert("Flash content is not available on your device.");return}i="<object allowFullScreen='True' allowScriptAccess='always' width='100%' height='100%'><param name='movie' value='"+b.attr("data-url")+"' /><param name='allowFullScreen' value='true' /><param name='wmode' value='transparent' /><embed src='"+b.attr("data-url")+"' type='application/x-shockwave-flash' allowFullScreen='True' allowScriptAccess='always' wmode='transparent' width='100%' height='100%'></embed></object>";
i="<div data-umgid='"+c+"' class='medialarge multimedia' style='width:"+b.attr("data-width")+"px;height:"+b.attr("data-height")+"px;'>"+i+"</div>";f=h(i);m.append(f);w(m.children(".multimedia[data-umgid="+c+"]"));r.hide();A=!1}else if(""==i&&0<b.children(".htmlcontent").length){f=h("<div data-umgid='"+c+"' class='medialarge multimedia embedcode' style=''>"+b.children(".htmlcontent").text()+"</div>");m.append(f);var i=f.children().width(),k=f.children().height();f.children().css("width","100%").css("height",
"100%");f.children().removeAttr("width").removeAttr("height");f.css("width",i).css("height",k);w(m.children(".multimedia[data-umgid="+c+"]"));r.hide();A=!1}Z(a,f);ka(f);la(f)}}d.allowRating&&ea(b);if(""!=d.showDesc&&"none"!=d.showDesc){var i=g.find(".mediadesc"),l=g.find(".mediadesc .title"),i=g.find(".mediadesc .desc"),k=g.find(".mediadesc .link"),p=g.find(".mediadesc .res");l.html(b.attr("data-title"));(l=b.attr("data-desc"))||(l="");i.html(l);b.attr("data-link")?(k.show(),k.attr("href",b.attr("data-link"))):
k.hide();b.attr("data-res")?(p.show(),p.html()==d.download&&p.attr("href",b.attr("data-res"))):p.hide()}if(0<H&&(i=b.next().attr("data-url"),"i"==$(i)))ba||(ba=new Image),ba.src=i;0>e.position().left+e.parent().position().left?(e=-1*e.position().left,j.animate({left:e},"slow")):j.position().left+e.position().left+e.outerWidth()>G.width()&&(i=j.find(".mediathumb:last"),k=na(i),i=i.position().left+k,e=-1*e.position().left,e+i<G.width()&&(e=G.width()-i),j.animate({left:e},"slow"));"undefined"!=typeof UPG_onPhotoLoad&&
UPG_onPhotoLoad(c);xa++;ya(b.attr("data-url"))});g.find(".closealbum .albumtitle").html(l.attr("data-title"));0<g.find(".closealbum img").length&&g.find(".closealbum img").attr("src",l.attr("data-logo"));oa(3E3);var f;d.defaultPhoto&&(f=h(".mediathumb[data-umgid="+d.defaultPhoto+"]"),1>f.length&&(f=void 0));f||(f=h(".mediathumb:first"));f.trigger("click");d.autoPlay&&pa()}function ya(a){var b=h(".mediathumb:eq("+o+")").attr("data-umgid"),c="#"+l.attr("data-umgid")+"/"+b,e=window.location.href;window.location.hash&&
(e=e.replace(location.hash,""));addthis.ost=0;addthis.update("share","url",e+c);addthis.ready();if(d.pinterest){var f=I.find(".addthis_toolbox");f.find("."+d.pinterest_style+"").remove();if("i"==$(a)){h(".medialarge[data-umgid="+b+"] img").attr("src");f.find(".atclear").remove();var b=f.find(".addthis_button_google_plusone"),g=h("<a class='"+d.pinterest_style+"' pi:init:layout='horizontal'></a>");0<b.length?g.insertBefore(b):f.append(g);f=f.find("."+d.pinterest_style+"");f.attr("pi:pinit:media",a);
f.attr("pi:pinit:url",e+c);addthis.toolbox(".addthis_toolbox")}}}function ea(a){c.find(".social .ratingscore");var b=c.find(".social .ratingstars");if(a.attr("data-score")){for(var d=1*a.attr("data-score"),e="",f=0;f<d-1;f++)e+="<span class='solid'></span>";0<d-f&&(d-=f,0.75<=d?(e+="<span class='solid'></span>",f+=1):0.25<=d&&(e+="<span class='semisolid'></span>",f+=1));for(;5>f;f++)e+="<span class='hollow'></span>";e="<div class='stars'>"+e+"</div>";a.attr("data-ratings")&&(e+="<div>based on "+a.attr("data-ratings")+
" ratings</div>");b.html(e)}else b.html("<div>Not rated</div>")}function oa(a){var b=g.find(".closealbum");0<b.length&&(a?b.stop().css("left",0).delay(a).animate({left:-1*b.width()},"slow"):b.stop().animate({left:0},"slow"))}function ka(a){var b=q.find("[data-umgid='"+a.attr("data-umgid")+"']").children(".tag");if(0<b.length){for(var c=0;c<b.length;c++){var e=h(b[c]),f="";e.attr("data-x")&&(f="left:"+e.attr("data-x")+"%;top:"+e.attr("data-y")+"%");e=h("<div class='atag' style='"+f+"'><div class='tagbody'><div class='deletetag'></div><div class='text'>"+
e.attr("data-tag")+"</div></div></div>");a.append(e);e.css("margin-left",e.width()/-2)}a.find(".deletetag").click(function(){h(this).parent().parent().addClass("deleted");return!1})}if(d.editable&&d.clientapi)a=g.find(".tagform .currenttags"),0==a.length&&(za(),a=g.find(".tagform .currenttags")),c=d.tagsassigned,c=c.replace("[x]",b.length),a.html(c)}function za(){g.append("<div class='tagform'><div class='placeholder'><div class='icon'></div></div><div class='currenttags'></div><div class='tag'></div></div>");
var a=g.find(".tagform");a.find(".placeholder");var b=g.find(".tag");b.html(d.tagphoto);a.hover(function(){a.stop().animate({left:0},"slow")},function(){J||a.stop().animate({left:-1*a.width()},"slow")});b.click(function(){var a=h(".mediathumb:eq("+o+")").attr("data-umgid"),b=m.children("[data-umgid='"+a+"']");if(b.hasClass("multimedia"))alert("Only images can be tagged.");else{var c=h(this);if(c.html()==d.tagging){J=!1;c.html(d.tagphoto);b.removeClass("tagging");b.unbind("click");for(var c="",g=0;g<
b.find(".atag").length;g++){var j=h(b.find(".atag")[g]);j.hasClass("deleted")||(c&&(c+=","),c+=C(j)+qa(j.find(".text").text()))}for(g=0;g<b.find(".newtag").length;g++)c&&(c+=","),j=h(b.find(".newtag")[g]),c+=C(j)+qa(j.find("input").val());b.children(".newtag").remove();dnn.xmlhttp.doCallBack(d.clientapi,"tag "+a+"@"+c,Aa,this,null,null,null,null,0)}else J=!0,c.html(d.tagging),b.addClass("tagging"),b.click(function(a){if(J){var b=h(this);b.children();b.children(".empty").remove();var c=h("<div class='newtag empty'><div class='frame'></div><div class='text'><input type='text' value='"+
d.tagdefault+"' /></div></div>");b.append(c);var e=a.pageX-b.offset().left,a=a.pageY-b.offset().top;c.css("left",Math.floor(100*(e/b.width()))+"%");c.css("top",Math.floor(100*(a/b.height()))+"%");var f=c.find("input");setTimeout(function(){f.focus()},10);f.keypress(function(a){if(27==a.which||0==a.which)h(this).parent().parent().remove();else if(13==a.which)return h(this).trigger("blur"),!1});f.blur(function(){if(""!=this.value.replace(/^\s+|\s+$/g,"")&&this.value.replace(/^\s+|\s+$/g,"")!=d.tagdefault)return h(this).parent().parent().removeClass("empty"),
!0;h(this).parent().parent().remove()})}})}})}function qa(a){return a.replace(",","SPACE")}function Aa(a){""!=a?alert(a):ra||(alert("All tags are saved, it may only be displayed after a page refresh."),ra=!0)}function na(a){var b=a.outerWidth();parseInt(a.css("margin-left"))&&(b+=parseInt(a.css("margin-left")));parseInt(a.css("margin-right"))&&(b+=parseInt(a.css("margin-right")));return b}function sa(){var a=G.width(),b=j.position().left,d=j.find(".mediathumb:last"),c=na(d),d=d.position().left+c,
c=Math.floor(a/c)*c;j.stop();this==ta[0]?0>b?(b=j.position().left+c,0<b&&(b=0),j.animate({left:b},"slow")):j.animate({left:100},"fast").animate({left:0},"slow"):b+d>a?(b=j.position().left-c,b+d<a&&(b=a-d),j.animate({left:b},"slow")):(a=j.position().left,j.animate({left:a-100},"fast").animate({left:a},"slow"))}function Z(a,b){a&&(a.removeClass("top").addClass("bottom"),a.fadeOut(d.animationSpeed));b.removeClass("bottom").addClass("top");b.fadeIn(d.animationSpeed)}function la(a){a.bind("touchstart",
function(a){a=a.originalEvent;this.start={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,time:(new Date).getTime()};this.isScrolling=void 0;this.deltaX=0;this.element.style.webkitTransitionDuration=0});a.bind("touchmove",function(a){a=a.originalEvent;if(!this.start)this.start={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,time:(new Date).getTime()};if(!(1<a.touches.length||a.scale&&1!==a.scale)){this.deltaX=a.touches[0].pageX-this.start.pageX;if("undefined"==typeof this.isScrolling)this.isScrolling=
!!(this.isScrolling||Math.abs(this.deltaX)<Math.abs(a.touches[0].pageY-this.start.pageY));if(!this.isScrolling)a.preventDefault(),this.style.marginLeft=this.deltaX+"px"}});a.bind("touchend",function(){var a=1E3>(new Date).getTime()-this.start.time&&50<Math.abs(this.deltaX);h(this).stop().animate({"margin-left":0},"slow");!this.isScrolling&&a&&S(o+(0>this.deltaX?1:-1));this.start=void 0})}function wa(){var a=g.find(".pager2 .pageindex");if(a){var b=g.find(".pager2 .prevpage"),c=g.find(".pager2 .nextpage"),
e=h(".mediathumb").length,f=d.xofy,f=f.replace("[x]",o+1),f=f.replace("[y]",e);a.html(f);0==o?b.addClass("disabled"):b.removeClass("disabled");o==e-1?c.addClass("disabled"):c.removeClass("disabled")}}function w(a){var b=1*a.attr("data-width"),c=1*a.attr("data-height");if(b){var e=m.width(),f=m.height(),g=b/e,f=c/f;"no"==d.scaleMode?(g=Math.min(g,f),1>g&&(g=1)):"fit"==d.scaleMode?g=Math.max(g,f):(d.scaleMode="max",g=Math.min(g,f));b=Math.round(b/g);c=Math.round(c/g);a.css("width",b);a.css("height",
c);a.css("left",(e-b)/2);c>y.position().top?a.css("top",0):a.css("top",(y.position().top-c)/2)}else a.css("left",(m.width()-a.width())/2),a.height()>y.position().top?a.css("top",0):a.css("top",(y.position().top-a.height())/2)}function pa(){0<H?ca():(da.addClass("pause"),H=window.setInterval(N+".onInterval()",1E3))}function ca(){0>H||(window.clearInterval(H),H=-1,z=0,da.removeClass("pause"))}function S(a){if(0>a||a>=h(".mediathumb").length)return!1;h(".mediathumb:eq("+a+")").trigger("click");return!0}
function $(a){a="undefined"!=typeof a?a.substring(a.lastIndexOf(".")+1,a.length).toLowerCase():!1;return"mp4"==a||"flv"==a?"v":"mp3"==a?"a":"swf"==a?"f":""!=a?"i":""}var c=h(this);c.children().hide();var q=c.children(".datahtml");c.append("<div class='loading'></div>");c.append("<div class='albumlist'><div class='albuminner'></div><div class='pager'><div class='prevpage'></div><div class='pageindex'></div><div class='nextpage'></div></div><div class='albumpath'></div></div>");var t=c.find(".albumlist"),
E=c.find(".albuminner"),L=c.find(".albumpath"),r=c.find(".loading"),fa=c.find(".pager"),Y=c.find(".nextpage"),X=c.find(".prevpage"),ua=c.find(".pageindex");c.append("<div class='slideshow'><div class='medialist'></div><div class='controls'><div class='playpause'></div><div class='prevgroup'></div><div class='thumblist'><div class='thumblistinner'></div></div><div class='nextgroup'></div><div class='fullscreen'></div></div></div>");var g=c.find(".slideshow"),m=c.find(".medialist"),y=c.find(".controls"),
da=c.find(".playpause"),ta=c.find(".prevgroup"),G=c.find(".thumblist"),j=c.find(".thumblistinner"),p=c.find(".nextgroup"),T=c.find(".fullscreen");Y.click(function(){ha(1)});X.click(function(){ha(-1)});da.click(function(){z=d.pauseTime-1;o==h(".mediathumb").length-1&&(m.find(".top").removeClass("top").fadeOut(1E3),o=-1);pa()});T.click(function(){if(T.hasClass("return")){c.removeClass("fullstate");d.responsive?(c.css("width","100%"),c.css("height",c.attr("data-height"))):(c.css("width",c.attr("data-width")),
c.css("height",c.attr("data-height")),c.css("margin-left","auto"),c.css("margin-top","auto"));T.removeClass("return");a=c.parent();for(b=0;10>b;b++){if(a.hasClass("umgcontainer")){a.removeClass("umgcontainer");a.addClass("DnnModule");break}a=a.parent()}}else{for(var a=c.parent(),b=0;10>b;b++){if(a.hasClass("DnnModule")){a.removeClass("DnnModule");a.addClass("umgcontainer");break}a=a.parent()}c.addClass("fullstate");c.attr("data-width",c.width());c.attr("data-height",c.height());c.css("width",h(window).width());
c.css("height",h(window).height());0<c.offset().left&&c.css("margin-left",-1*c.offset().left+"px");0<c.offset().top&&c.css("margin-top",-1*c.offset().top+"px");T.addClass("return");scroll(0,0)}t.css("top",c.height());x(q.find(".album[data-umgid='"+l.attr("data-umgid")+"']").parent());a=h(".mediathumb:eq("+o+")").attr("data-umgid");a=m.children("[data-umgid='"+a+"']");w(a)});ta.click(sa);p.click(sa);d.allowRating?(g.append("<div class='social'><div class='ratingscore'><div class='addthis'></div></div><div class='ratingstars'></div><div class='yourrate'></div><div class='rate'></div><div class='addthis_default_style addthis_toolbox addthis_32x32_style'></div></div>"),
g.find(".social .ratingscore"),g.find(".social .ratingstars"),g.find(".social .yourrate").html(d.yourrate),B()):d.showSocial&&g.append("<div class='social'><div class='ratingscore'><div class='addthis'></div></div><div class='yourrate'>"+d.sharethis+"</div><div class='addthis_default_style addthis_toolbox addthis_32x32_style'></div></div>");p=g.find(".addthis_default_style");if(0<p.length){d.facebook&&d.twitter&&d.linkedIn&&d.email&&d.googlePlus&&d.pinterest&&g.find(".social").addClass("wide");var k=
"";d.facebook&&(k+="<a class='addthis_button_facebook'></a>");d.twitter&&(k+="<a class='addthis_button_twitter'></a>");d.linkedIn&&(k+="<a class='addthis_button_linkedin'></a>");d.email&&(k+="<a class='addthis_button_email'></a>");d.pinterest&&(k+="<a class='"+d.pinterest_style+"' pi:init:layout='horizontal'></a>");d.googlePlus&&(k+="<a class='addthis_button_google_plusone'></a>");p.html(k)}p=g.find(".addthis_button_email");0<p.length&&p.click(function(){ca()});var I=c.find(".social");0<I.length&&
I.hover(function(){I.stop().animate({left:0},"slow")},function(){I.stop().animate({left:-1*I.width()},"slow")});d.quickNav&&(g.append("<div class='pager pager2'><div class='prevpage'></div><div class='pageindex'></div><div class='nextpage'></div></div>"),p=g.find(".pager2 .prevpage"),g.find(".pager2 .pageindex"),g.find(".pager2 .nextpage").click(function(){S(o+1)}),p.click(function(){S(o-1)}));""!=d.showDesc&&"none"!=d.showDesc&&(g.append("<div class='mediadesc "+d.showDesc+"'><div><div class='close'></div><div class='title' style='color:#"+
d.titleColor+";'></div><div class='desc'></div><div class='buttons'><a class='link' target='"+(d.linkInNewWindow?"_blank":"")+"'>"+d.readmore+"</a><a class='res' target='"+(d.linkInNewWindow?"_blank":"")+"'>"+(0<d.price?d.purchase:d.download)+"</a></div></div></div>"),g.find(".mediadesc .close").click(function(){g.find(".mediadesc").hasClass("closed")?g.find(".mediadesc").removeClass("closed"):g.find(".mediadesc").addClass("closed")}),0<d.price&&g.find(".mediadesc .res").click(function(){if("undefined"!=
typeof UPG_AddToCart){var a=h(".mediathumb:eq("+o+")"),b=1*a.attr("data-umgid");UPG_AddToCart(b,a.children("img").attr("src"))}}));if(1<c.find(".album").length){g.append("<div class='closealbum'><div class='placeholder'><div class='icon'></div></div><div class='title'>"+d.currentalbum+"</div><img src='' alt='logo' /><div class='albumtitle' style='color:#"+d.titleColor+";'></div><div class='return'>"+d.closealbum+"</div></div>");var K=g.find(".closealbum");K.find(".placeholder");p=K.find(".return");
K.hover(function(){K.stop().animate({left:0},"slow")},function(){J||K.stop().animate({left:-1*K.width()},"slow")});p.click(function(){g.hide();t.animate({top:0},"fast","linear",null)})}var s,N='jQuery("#'+c.attr("ID")+'")[0]',l,ma=!1,H=-1,z=0,o=-1,xa=0,A=!1,M=!1,J=!1,ba=void 0,ra=!1,p=!1,k=navigator.userAgent;if(k.match(/iPhone/i)||k.match(/iPod/i)||k.match(/iPad/i))p=!0;var aa=p,v=-1,O=-1,W=-1,P=-1,U=-1,V=-1,Q=-1;this.onInterval=function(){A||(z+=1,!M&&!J&&!(0<c.find(".social").length&&0==c.find(".social").position().left)&&
z>=d.pauseTime&&(z=0,o<h(".mediathumb").length-1?S(o+1):(ca(),oa())))};this.videoEnd=function(){M=!1};""!=d.backgroundColor&&c.css("background-color","#"+d.backgroundColor);""!=d.slideshowBackground&&g.css("background-color","#"+d.slideshowBackground);d.hideOverlays?g.hover(function(){g.addClass("hover")},function(){g.removeClass("hover")}):g.addClass("hover");d.responsive&&(h(window).bind("resize",function(){var a=parseInt(c.css("max-width")),b=parseInt(c.css("max-height")),d=c.width();c.css("height",
b/a*d);a=h(".mediathumb:eq("+o+")").attr("data-umgid");a=m.children("[data-umgid='"+a+"']");w(a);0<t.position().top?t.css("top",c.height()):t.css("top",0);l?x(q.find(".album[data-umgid='"+l.attr("data-umgid")+"']").parent()):x(q)}),h(window).trigger("resize"));x(q);(function(){if(d.defaultAlbum){var a=q.find(".album[data-umgid="+d.defaultAlbum+"]");if(0<a.length){R(a);foundDefault=!0;a.parent().hasClass("album")&&x(a.parent());return}}1==q.find(".album").length&&(t.hide(),R(h(q.find(".album")[0])))})();
r.hide()})}})(jQuery);
